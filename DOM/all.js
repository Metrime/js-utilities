function $(e){return this===window?new $(e):(this.el="object"==typeof e?e.length?document.querySelectorAll(e):e:document.querySelector(e),this.shortcuts=function(e){return"html"===e?e="innerHTML":"text"===e?e=void 0!=Element.prototype.innerText?"innerText":"textContent":"class"===e&&(e="className"),e},this)}$.prototype.add=function(e,t){if(this.el){var n=$(this.el);if(e=this.shortcuts(e),"innerHTML"===e||"innerText"===e)this.el[e]+=t;else if("append"===e||"prepend"===e){if("object"==typeof t)var r=t;else{var i,r=document.createDocumentFragment(),o=document.createElement("div");for(o.innerHTML=t;i=o.firstChild;)r.appendChild(i)}"append"===e?this.el.appendChild(r):this.el.insertBefore(r,this.el.firstChild)}else if(!n.has(e,t)){var s=n.get(e);n.set(e,(s?s+" ":"")+t)}return this}},$.prototype.each=function(e){for(var t=this.el.length,n=0;t>n;)e($(this.el[n]),n),n++},$.prototype.on=function(e,t){return this.el.addEventListener(e,t,!1),this},$.prototype.off=function(e,t){return this.el.removeEventListener(e,t,!1),this},$.prototype.fetch=function(e){var t=this.el;t&&$(t).get("data-fetch")&&(void 0!=spinner&&spinner.show(t),new ajax($(t).get("data-fetch"),function(n){void 0!=spinner?spinner.hide(function(){e&&e(n,$(t))}):e&&e(n,$(t))}))},$.prototype.find=function(e){var t=this.el;if(t)return $(t.length?t.querySelectorAll(e):t.querySelector(e))},$.prototype.get=function(e){var t=this.el;if(t)return"number"==typeof e?$(t[e]):(e=this.shortcuts(e),void 0!=t[e]?t[e]:t.getAttribute(e)?t.getAttribute(e):null)},$.prototype.has=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test($(this.el).get(e))},$.prototype.parent=function(e){var t=this.el;if(t){if(e){if("string"==typeof e){for(e=e.toUpperCase();t.nodeName!=e&&"BODY"!=t.nodeName;)t=t.parentNode;return $(t)}for(;e--&&"BODY"!=t.nodeName;)t=t.parentNode;return $(t)}return $(t.parentNode)}},$.prototype.remove=function(e,t){var n=this.el;if(n)return e||t?t&&$(n).has(e,t)?$(n).set(e,$(n).get(e).replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")):n.removeAttribute(e):n.parentNode.removeChild(n),this},$.prototype.set=function(e,t){var n=this.el;if(n)return e=this.shortcuts(e),void 0!=n[e]?n[e]=t:n.setAttribute(e,t),this};