function $(){var t=arguments;return this===window?new $(t):(this.el=selector(_toArray(t[0])),void(this.shortcuts=function(t){return"html"===t?t="innerHTML":"text"===t?t=void 0!=Element.prototype.innerText?"innerText":"textContent":"class"===t&&(t="className"),t}))}function selector(t,e){return _unique(_flatten(t.map(function(t){return"string"==typeof t?/\*/.test(t)?_toArray((e||document).querySelectorAll(t.split("*")[1])):(e||document).querySelector(t):t})).filter(function(t){return null!=t&&!(t instanceof NodeList)}))}_toArray=function(t){return t.length&&"object"==typeof t?Array.prototype.slice.call(t):t},_flatten=function(t,e){return e=[],e.concat.apply(e,t)},_unique=function(t){return t.filter(function(e,n){return t.indexOf(e)==n})};var dom=$.prototype;dom.add=function(t,e){var n=this.el;return t=this.shortcuts(t),n.forEach("innerHTML"===t||"innerText"===t?function(n){n&&(n[t]+=e)}:function(n){if(!$(n).has(t,e)){var r=$(n).get(t);$(n).set(t,(r?r+" ":"")+e)}}),this},dom.children=function(){var t=_flatten(this.el.map(function(t){return _toArray(t.children)}));return $(t)},dom.css=function(t){return this.el.forEach(function(e){for(key in t)e.style[key]=t[key]}),this},dom.on=function(t,e){return this.el.forEach(function(n){n.addEventListener(t,e,!1)}),this},dom.off=function(t){return this.el.forEach(function(e){e.removeEventListener(t,cb,!1)}),this},dom.filter=function(t){var e=this.el.filter(function(e){return selector(["*"+t],e.parentNode).indexOf(e)>-1});return $(e)},dom.find=function(t){return this.el=_flatten(this.el.map(function(e){return selector([t],e)})),this},dom.get=function(t){var e=this.el;if("number"==typeof t)return $([e[t]]);t=this.shortcuts(t);var n=e.map(function(e){return void 0!=e[t]?e[t]:e.getAttribute(t)});return n.length>1?n:n[0]},dom.has=function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test($(this.el).get(t))},dom.parent=function(t){return this.el=this.el.map(function(e){for(var n=e.parentNode;t&&n.nodeName!=t.toUpperCase()&&"BODY"!=n.nodeName;)n=n.parentNode;return n}),this.el=_unique(this.el),this},dom.remove=function(t,e){return this.el.forEach(function(n){t||e?e&&$(n).has(t,e)?$(n).set(t,$(n).get(t).replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")):n.removeAttribute(t):n.parentNode.removeChild(n)}),this},dom.set=function(t,e){var n=this.el;return t=this.shortcuts(t),n.forEach(function(n){void 0!=n[t]?n[t]=e:n.setAttribute(t,e)}),this},_dot=function(t){return function(e){return e[t]}},dom.next=function(){return $(this.el.map(_dot("nextElementSibling")))},dom.prev=function(){return $(this.el.map(_dot("previousElementSibling")))};